<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title> Listado de Usuarios </title>
</head>

<body>
  <div style="height:0px;"> &nbsp; </div>
  <div id="usuario-index">
    <div style="float:left width: 80%">
      <h2 style="margin-top:1px;"> -Listado de Usuarios-</h2>
      <a py:if="p" href="/NuevoUsuarioProyecto/${proyecto.codproyecto}">Nuevo usuario de proyecto</a>

      <p>
        <tr class="navigation" py:if="currentPage.page_count > 1">
           <td colspan="4" class="pager">${currentPage.pager()}</td>
        </tr>
        <tr class="navigation" py:if="currentPage.item_count == 0">
            <td colspan="4" class="pager">No se encontraron usuarios</td>
        </tr>
      </p>

      <br/><label><b><u>USUARIOS DE PROYECTO</u>:</b></label><br/><br/>	
      <table class="usuarios-listado">
        <thead>
            <tr>
	      <th>Editar</th>
	      <th>Agregar roles</th>
	      <th>Quitar roles</th>	
	      <th>Id</th>
	      <th>Username</th>
	      <th>Nombre completo</th>
	      <th>Telefono</th>
	      <th>Direccion</th>
	      <th>Email</th>
	      <th>Roles</th>
            </tr>
        </thead>

        <tbody>
          <tr py:for="i, usuario in enumerate(usuarios)" class="${i%2 and 'even' or 'odd'}">
	    <th> <a py:if="currentPage" href="/EditarUsuarioProyecto/$proyecto.codproyecto/${usuario.user_id}">Editar</a> </th>
	    <th> <a href="/EditarUsuarioAgregarRolesProyecto/$proyecto.codproyecto/${usuario.user_id}">Agregar roles</a></th>
	    <th> <a href="/EditarUsuarioQuitarRolesProyecto/$proyecto.codproyecto/${usuario.user_id}">Quitar roles</a></th>
	    <th class="user-id">${usuario.user_id}</th>
            <td class="user-name">${usuario.user_name}</td>
            <td class="user-fullname">${usuario.user_fullname}</td>
	    <td class="user-telefono">${usuario.user_telefono}</td>
	    <td class="user-direccion">${usuario.user_direccion}</td>
	    <td class="user-email_address">${usuario.email_address}</td>
	    <th> <a href="/ListarRolesUsuariosProyecto/$proyecto.codproyecto/${usuario.user_id}">Ver roles</a></th>
	    <!--<td class="user-roles"> <py:for each="rol in usuario.groups">"${rol.group_name}" </py:for></td>-->
            </tr>
        </tbody>
    </table>

	<br/><br/><label><b><u>DEM√ÅS USUARIOS</u>:</b></label><br/><br/>	
	<table class="usuarios-listado">
        <thead>
            <tr>
	      <th>Agregar roles</th>
	      <th>Quitar roles</th>
	      <th>Id</th>
	      <th>Username</th>
	      <th>Nombre completo</th>
	      <th>Telefono</th>
	      <th>Direccion</th>
	      <th>Email</th>
            </tr>
        </thead>

        <tbody>
          <tr py:for="i, usuario in enumerate(no_usuarios)" class="${i%2 and 'even' or 'odd'}">
	    <th> <a href="/EditarUsuarioAgregarRolesProyecto/$proyecto.codproyecto/${usuario.user_id}">Agregar roles</a></th>
	    <th> <a href="/EditarUsuarioQuitarRolesProyecto/$proyecto.codproyecto/${usuario.user_id}">Quitar roles</a></th>
	    <th class="user-id">${usuario.user_id}</th>
            <td class="user-name">${usuario.user_name}</td>
            <td class="user-fullname">${usuario.user_fullname}</td>
	    <td class="user-telefono">${usuario.user_telefono}</td>
	    <td class="user-direccion">${usuario.user_direccion}</td>
	    <td class="user-email_address">${usuario.email_address}</td>
            </tr>
        </tbody>

    </table>
  </div>
  </div>
  <div class="clearingdiv" />
</body>
</html>
